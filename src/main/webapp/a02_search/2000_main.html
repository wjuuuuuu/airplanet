<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<style>
.col {
	width: 100%;
	height: 600px;
}
.col::after {
	content: "";
	background: url('/b01_img/main_back.jpg');
	background-size: cover;
	opacity: 0.7;
	position: absolute;
	top: 100px;
	left: 0px;
	right: 0px;
	bottom: 0px;
	z-index:-1;
}
.colD {
	width: 80%;
	height: 500px;
	margin:auto;
}
[name=signin]:hover, [name=signup]:hover, [name=searchBtn]{
	cursor:pointer;
}
.hidden {
	display:none;
}
.wordList{
	display:none;
}
.wordList1{
	display:none;
}
.des{
	padding:5px 0 0 10px;
	border:none;
	width:245px;
	background:rgba(220,220,220,0.7); 
}
.arv{
	padding:5px 0 0 10px;
	border:none;
	width:245px;
	background:rgba(220,220,220,0.7); 
}
.des:hover{
	background:rgba(100,100,100,0.7);
	color:white;
	font-weight:600;
}
.arv:hover{
	background:rgba(100,100,100,0.7);
	color:white;
	font-weight:600;
}
.balloon {  
	 position:relative; 
	 margin:20px 0 0 -15px;
	 width:300px; 
	 height:280px;
	 background:rgba(100,100,100,0.7); 
	 border-radius:10px;
	 display: none;
}
.balloon:after { 
	 border-top:0px solid transparent; 
	 border-left: 10px solid transparent; 
	 border-right: 10px solid transparent; 
	 border-bottom: 10px solid rgba(100,100,100,0.7);
	 content:""; 
	 margin-left:-55px;
	 position:absolute;
	 top:-10px;
	 left:200px;  
}
.pBtn1, .pBtn2{
	border-radius:50%;
	border:2px solid #cccccc;
	width:40px;
	height:40px;
	font-size:xx-large;
	color:steelblue;
}
.mBtn1,.mBtn2{
	background:#cccccc;
	color:#444444;
	border-radius:50%;
	border:2px solid #cccccc;
	width:40px;
	height:40px;
	font-size:xx-large;
}
.mBtn1:active, .pBtn1:active,.mBtn2:active, .pBtn2:active{
	border:2px solid steelblue;
}
.headerRL{
	width:120px;
	height:50px;
	background:lightblue;
	border-radius:10px;
	border:none;
	font-size:medium;
	font-weight:700;
	color:white;
}
</style>
</head>
<body>
	<div class="col">
		<div style="display:flex;">
			<div style="margin:5px 0 0 150px;"><img src="/b01_img/airplanet_logo.png" width="100%" height="70px"/></div>
			<div style="margin:20px 0 0 45%;">
				<input class="headerRL" style="margin-right:20px;" type="button" name="signup" value="회원가입" onclick="location.href='/a01_member/1001_signup.html'"/>
				<input class="headerRL" type="button" name="signin" value="로그인" onclick="location.href='/a01_member/1002_signin.html'"/>
			</div>
		</div>
		<div class="colD">
			<div style="margin-top:100px;"><span style="font-size:70px;font-weight:800;color:white;">여행을 시작하세요</span></div>
			<div style="border:1px solid white;border-radius:20px;height:250px;background:rgba(250,250,250,0.9)">
				<div style="margin:50px 0 0 20px">
					<input type="radio" name="trip" value="0" checked="checked"/><span style="font-weight:600" > 왕복 </span> 
					<input type="radio" name="trip" value="1"/><span style="font-weight:600" > 편도</span>
				</div>
			<div style="display:flex;margin:25px 0 0 25px;">
				<div style="flex-direction:column;">
					<div><span style="font-weight:600;font-size:small;">출발지</span></div>
					<div><input style="width:250px;height:30px;" type="text" name="departure"/></div>
					<div style="position:absolute;">
						<div class="wordList" tabindex="0"></div>
					</div>
				</div>
				<div style="flex-direction:column;">
					<div><span style="font-weight:600;font-size:small;">도착지</span></div>
					<div><input style="width:250px;height:30px;" type="text" name="arrival"/></div>
					<div style="position:absolute;">
						<div class="wordList1" tabindex="0"></div>
					</div>
				</div>
				<div style="flex-direction:column;">
					<div><span style="font-weight:600;font-size:small;">가는날</span></div>
					<div><input style="width:125px;height:30px;" type="text" name="ddate"/></div>
				</div>
				<div style="flex-direction:column;">
					<div><span style="font-weight:600;font-size:small;">오는날</span></div>
					<div><input style="width:125px;height:30px;" type="text" name="adate"/></div>
				</div>
				<div style="flex-direction:column;">
					<div><span style="font-weight:600;font-size:small;">좌석등급 및 승객</span></div>
					<div><input style="width:250px;height:30px;" type="text" name="gradenum"/></div>
					<div style="position:absolute;">
						<div class="gAn" tabindex="0">
							<div class="balloon">
								<div style="margin-left:30px;padding-top:20px;font-size:small;font-weight:600;color:white;">좌석 등급</div>
								<div style="margin:-5px 0 0 28px;padding-top:10px;">
									<select class="opt" style="border-radius:5px;width:240px;height:35px;">
										<option>일반석</option>
										<option>비즈니스석</option>
										<option>일등석</option>
									</select>
								</div>
								<div style="margin-left:30px;padding:10px 0 10px 0;font-size:small;font-weight:600;color:white;">성인</div>
								<div style="display:flex;margin-left:30px;">
									<div><input type="button" class="mBtn1" value="&#8722"></div>
									<div class="adt" style="margin:12px 15px 0 15px;color:white;">1</div>
									<div><input type="button" class="pBtn1" value="&#43"></div>
									<div style="margin:12px 10px 0 10px;color:white;">만 16세 이상</div>
								</div>
								<div style="margin-left:30px;padding:15px 0 0px 0;font-size:small;font-weight:600;color:white;">유/소아</div>
								<div style="display:flex;margin:7px 0 0 30px;">
									<div><input type="button" class="mBtn2" value="&#8722"></div>
									<div class="adol" style="margin:12px 15px 0 15px;color:white;">0</div>
									<div><input type="button" class="pBtn2" value="&#43"></div>
									<div style="margin:12px 10px 0 10px;color:white;">만 0 - 15세</div>
								</div>
								<div style="margin:15px 0 0 200px;"><input class="sendgAn" type="button" style="width:70px;height:25px;background:rgba(250,250,250,0.7);border-radius:5px;border:none;" value="완료"></div>
								
							</div>
						 </div>
					</div>
				</div>
			</div>
			<div><input style="z-index:1;position:absolute;width:30px;height:25px;margin:-30px 0 0 250px;background:white;border:none;font-size:20px;color:steelblue" type="button" name="switch" value="⇄"/></div>
			<div><input style="margin:20px 0 0 915px;width:150px;height:50px;font-size:large;font-weight:700;background:NavajoWhite;border:1px solid moccasin;color:white;border-radius:10px;" name="searchBtn" type="button" value="항공권 검색 →"></div>
			
			</div>
		</div>
	</div>
	<div id="footer" style="margin-top:160px;"></div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>	
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
<script>
const $searchInput = document.querySelector("[name=departure]");
const $searchInput1 = document.querySelector("[name=arrival]");
const $wordList = document.querySelector(".wordList");
const $wordList1 = document.querySelector(".wordList1");

var tplace = [
	["대한민국","서울"],["대한민국","부산"],["대한민국","인천"],["영국","런던"],["미국","뉴욕"],
	["미국","워싱턴"],["미국","LA"],["인도","뉴델리"],["프랑스","파리"]
	]
var show = ""
tplace.forEach(function(e){
	show += "<div class='des'>"+e[1]+", "+e[0]+"</div>"
})
$wordList.innerHTML = show
var tplace1 = [
	["대한민국","서울"],["대한민국","부산"],["대한민국","인천"],["영국","런던"],["미국","뉴욕"],
	["미국","워싱턴"],["미국","LA"],["인도","뉴델리"],["프랑스","파리"]
	]
var show1 = ""
tplace1.forEach(function(a){
	show1 += "<div class='arv'>"+a[1]+", "+a[0]+"</div>"
})
$wordList1.innerHTML = show1

$searchInput.onkeyup=a
$searchInput1.onkeyup=b

$searchInput.onblur=function(){
	if(event.relatedTarget === null) {
		$wordList.style.display="none"
	}
}
$searchInput1.onblur=function(){
	if(event.relatedTarget === null) {
		$wordList1.style.display="none"
	}
}
var place = document.querySelectorAll(".des")

place.forEach(function(d){
	for(var i=0;i<place.length;i++){
		place[i].onclick=function(){
			document.querySelector("[name=departure]").value = this.innerText
			$wordList.style.display="none"
		}
	}
})
var place1 = document.querySelectorAll(".arv")
place1.forEach(function(d){
	for(var i=0;i<place.length;i++){
		place1[i].onclick=function(){
			document.querySelector("[name=arrival]").value = this.innerText
			$wordList1.style.display="none"
		}
	}
})
function a(){
	if(document.querySelector("[name=departure]").value.length==0){
		$wordList.style.display="none"
	}else{
		$wordList.style.display="inline"
	}
}
function b(){
	if(document.querySelector("[name=arrival]").value.length==0){
		$wordList1.style.display="none"
	}else{
		$wordList1.style.display="inline"
	}
}

function ch2pattern(ch) {
  // 사용자가 초성만 입력한 경우
  if (/[ㄱ-ㅎ]/.test(ch)) {
    const chToBegin = {
      ㄱ: "가".charCodeAt(0),
      ㄲ: "까".charCodeAt(0),
      ㄴ: "나".charCodeAt(0),
      ㄷ: "다".charCodeAt(0),
      ㄸ: "따".charCodeAt(0),
      ㄹ: "라".charCodeAt(0),
      ㅁ: "마".charCodeAt(0),
      ㅂ: "바".charCodeAt(0),
      ㅃ: "빠".charCodeAt(0),
      ㅅ: "사".charCodeAt(0),
      ㅆ: "싸".charCodeAt(0),
      ㅇ: "아".charCodeAt(0),
      ㅈ: "자".charCodeAt(0),
      ㅊ: "차".charCodeAt(0),
      ㅋ: "카".charCodeAt(0),
      ㅌ: "타".charCodeAt(0),
      ㅍ: "파".charCodeAt(0),
      ㅎ: "하".charCodeAt(0),
    };
    const begin = chToBegin[ch];
    const end = begin + 587;
    return `[${ch}\\u${begin.toString(16)}-\\u${end.toString(16)}]`;
  }
  // 사용자가 초성+중성 또는 초성+중성+종성을 입력한 경우
  else if (/[가-히]/.test(ch)) {
    const offset = "가".charCodeAt(0);
    const chCode = ch.charCodeAt(0) - offset;
    // 사용자가 초성+중성을 입력한 경우
    if (chCode % 28 <= 0) {
      const begin = Math.floor(chCode / 28) * 28 + offset;
      const end = begin + 27;
      return `[\\u${begin.toString(16)}-\\u${end.toString(16)}]`;
    }
    // 사용자가 초성+중성+종성을 입력한 경우
    else return ch;
  }
}

// 퍼지 문자열 검색을 위한 정규식 생성
function createFuzzyMatcher(input) {
  const pattern = input.split("").map(ch2pattern).join(".*?");
  return new RegExp(pattern);
}

// 한글 퍼지 문자열 검색
$searchInput.addEventListener("input", (e) => {
  const query = e.target.value;
  const regex = createFuzzyMatcher(query);
  const words = $wordList.children;
  for (let i = 0; i < words.length; i++) {
    if (regex.test(words[i].textContent.toLowerCase())) words[i].classList.remove("hidden");
    else words[i].classList.add("hidden");
  }
});
// 한글 퍼지 문자열 검색
$searchInput1.addEventListener("input", (e) => {
  const query = e.target.value;
  const regex = createFuzzyMatcher(query);
  const words = $wordList1.children;
  for (let i = 0; i < words.length; i++) {
    if (regex.test(words[i].textContent.toLowerCase())) words[i].classList.remove("hidden");
    else words[i].classList.add("hidden");
  }
});
	
	
	$("#footer").load("footer.html")
	
	var swch = document.querySelector("[name=switch]")
	var depart = document.querySelector("[name=departure]")
	var arriv = document.querySelector("[name=arrival]")
	swch.onclick=function(){
		var departSave = depart.value
		depart.value = arriv.value
		arriv.value = departSave
	}

	$(function(){
	    $("[name=ddate], [name=adate]").datepicker({
	    	  changeMonth: true, // 월을 바꿀수 있는 셀렉트 박스를 표시한다.
	    	  changeYear: true, // 년을 바꿀 수 있는 셀렉트 박스를 표시한다.
	    	  minDate: '0y', // 현재날짜로부터 100년이전까지 년을 표시한다.
	    	  nextText: '다음 달', // next 아이콘의 툴팁.
	    	  prevText: '이전 달', // prev 아이콘의 툴팁.
	    	  numberOfMonths: [1,1], // 한번에 얼마나 많은 월을 표시할것인가. [2,3] 일 경우, 2(행) x 3(열) = 6개의 월을 표시한다.
	    	  stepMonths: 1, // next, prev 버튼을 클릭했을때 얼마나 많은 월을 이동하여 표시하는가. 
	    	  yearRange: 'c-100:c+10', // 년도 선택 셀렉트박스를 현재 년도에서 이전, 이후로 얼마의 범위를 표시할것인가.
	    	  showButtonPanel: true, // 캘린더 하단에 버튼 패널을 표시한다. 
	    	  currentText: '오늘 날짜' , // 오늘 날짜로 이동하는 버튼 패널
	    	  closeText: '닫기',  // 닫기 버튼 패널
	    	  dateFormat: "mm-dd", // 텍스트 필드에 입력되는 날짜 형식.
	    	  showMonthAfterYear: true , // 월, 년순의 셀렉트 박스를 년,월 순으로 바꿔준다. 
	    	  dayNamesMin: ['월', '화', '수', '목', '금', '토', '일'], // 요일의 한글 형식.
	    	  monthNamesShort: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'], // 월의 한글 형식.
	    	  yearRange: "2022:2024" //연도 범위
	    });
	});
	$(document).ready(function () {
        $.datepicker.setDefaults($.datepicker.regional['ko']); 
        $( "[name=ddate]" ).datepicker({
             changeMonth: true, 
             changeYear: true,
             nextText: '다음 달',
             prevText: '이전 달', 
             dayNames: ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'],
             dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'], 
             monthNamesShort: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],
             monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],
             dateFormat: "yymmdd",
             maxDate: 0,                       // 선택할수있는 최소날짜, ( 0 : 오늘 이후 날짜 선택 불가)
             onClose: function( selectedDate ) {    
                  //시작일(startDate) datepicker가 닫힐때
                  //종료일(endDate)의 선택할수있는 최소 날짜(minDate)를 선택한 시작일로 지정
                 $("#endDate").datepicker( "option", "minDate", selectedDate );
             } 
        });
        $( "[name=adate]" ).datepicker({
             changeMonth: true, 
             changeYear: true,
             nextText: '다음 달',
             prevText: '이전 달', 
             dayNames: ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'],
             dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'], 
             monthNamesShort: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],
             monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],
             dateFormat: "yymmdd",
             maxDate: 0,                       // 선택할수있는 최대날짜, ( 0 : 오늘 이후 날짜 선택 불가)
             onClose: function( selectedDate ) {    
                 // 종료일(endDate) datepicker가 닫힐때
                 // 시작일(startDate)의 선택할수있는 최대 날짜(maxDate)를 선택한 시작일로 지정
                 $("#startDate").datepicker( "option", "maxDate", selectedDate );
             }    
        });    
	});
	
	var ddateOb = document.querySelector("[name=ddate]")
	var adateOb = document.querySelector("[name=adate]")
	
	var d = new Date()
	ddateOb.value = (d.getMonth()+1)+"-"+d.getDate()
	adateOb.value = (d.getMonth()+1)+"-"+d.getDate()
	
	ddateOb.onchange=function(){
		const ddate = new Date(ddateOb.value)		
		if(ddateOb.value >= adateOb.value){
			adateOb.value = ddateOb.value 
		}
	}	
	adateOb.onchange=function(){
		const adate = new Date(adateOb.value)
		if(ddateOb.value >= adateOb.value){
			adateOb.value = ddateOb.value 
		}	
	}
	
	var mBtn1Ob = document.querySelector(".mBtn1")
	var mBtn2Ob = document.querySelector(".mBtn2")
	var pBtn1Ob = document.querySelector(".pBtn1")
	var pBtn2Ob = document.querySelector(".pBtn2")
	var adtOb = document.querySelector(".adt")
	var adolOb = document.querySelector(".adol")
	
	var cnt1 = 1;
	var cnt2 = 0;
	mBtn1Ob.onclick=minus1
	function minus1(){
		if(cnt1 >= 2){
			cnt1--
			if(cnt1 <= 1){
				mBtn1Ob.style.background="#cccccc"
				mBtn1Ob.style.color="#444444"
				adtOb.innerText=cnt1
			}else{
				mBtn1Ob.style.background="white"
				mBtn1Ob.style.color="steelblue"
				if(cnt1 >= 2){
					adtOb.innerText=cnt1
				}
			}
		}else{
			alert("성인은 1명 아래로 내려갈 수 없습니다.")
		}
	}

	mBtn2Ob.onclick=minus2
	function minus2(){
		if(cnt2 >= 1){
			cnt2--
			if(cnt2 <= 0){
				mBtn2Ob.style.background="#cccccc"
				mBtn2Ob.style.color="#444444"
				adolOb.innerText=cnt2
				cnt2++
			}else{
				mBtn2Ob.style.background="white"
				mBtn2Ob.style.color="steelblue"
				if(cnt2 >= 1){
					adolOb.innerText=cnt2
				}
			}
		}else{
			alert("유/소아는 0명 아래로 내려갈 수 없습니다.")
		}
	}
	
	pBtn1Ob.onclick=function(){
		cnt1++
		if(cnt1 >= 2){
			mBtn1Ob.style.background="white"
			mBtn1Ob.style.color="steelblue"
		}
		adtOb.innerText=cnt1
	}
	pBtn2Ob.onclick=function(){
		cnt2++
		if(cnt2 >= 1){
			mBtn2Ob.style.background="white"
			mBtn2Ob.style.color="steelblue"
		}
		adolOb.innerText=cnt2
	}
	
	var gradenumOb = document.querySelector("[name=gradenum]")
	var sendgAnOb = document.querySelector(".sendgAn")
	var optOb = document.querySelector(".opt")

	gradenumOb.onclick=function(){
		document.querySelector(".balloon").style.display="block"
	}
	sendgAnOb.onclick=function(){
		gradenumOb.value = "등급: "+optOb.value
		gradenumOb.value  += ", 성인: "+cnt1+"명"
		if(cnt2 >= 1) gradenumOb.value  += ", 유소아: "+cnt2+"명"
		document.querySelector(".balloon").style.display="none"
	}
	
	gradenumOb.onblur=function(){
		if(event.relatedTarget == null) {
			document.querySelector(".balloon").style.display="none"
		}
	} 
	document.querySelector(".gAn").onblur=function(){
		document.querySelector(".balloon").style.display="none"
	}
	
	var tripArr = document.querySelectorAll("[name=trip]")
	var adateB = false
	
	var adateOb = document.querySelector("[name=adate]")
	
	for(var idx=0;idx<tripArr.length;idx++){
		tripArr[idx].onclick=function(){
			if(this.value == 1){ 
				adateB = true
				adateOb.readOnly=adateB
				adateOb.style.border="1px solid #252525"
				adateOb.style.background="#dddddd"
				adateOb.style.height="32px"
				adateOb.style.width="127px"
				$("[name=adate]").datepicker('disable');
			}else{
				adateB = false
				adateOb.readOnly=adateB
				adateOb.style.background="white"
				$("[name=adate]").datepicker('enable');
			}
		}
	}
	
	
	
	
	

</script>
</body>
</html>
